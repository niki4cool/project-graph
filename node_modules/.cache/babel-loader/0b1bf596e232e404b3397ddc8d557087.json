{"ast":null,"code":"/**\n * Touch-to-move-forward controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('touch-controls', {\n  schema: {\n    enabled: {\n      default: true\n    },\n    reverseEnabled: {\n      default: true\n    }\n  },\n  init: function init() {\n    this.dVelocity = new THREE.Vector3();\n    this.bindMethods();\n    this.direction = 0;\n  },\n  play: function play() {\n    this.addEventListeners();\n  },\n  pause: function pause() {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  addEventListeners: function addEventListeners() {\n    var sceneEl = this.el.sceneEl;\n    var canvasEl = sceneEl.canvas;\n\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    canvasEl.addEventListener('touchstart', this.onTouchStart);\n    canvasEl.addEventListener('touchend', this.onTouchEnd);\n  },\n  removeEventListeners: function removeEventListeners() {\n    var canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\n\n    if (!canvasEl) {\n      return;\n    }\n\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\n  },\n  isVelocityActive: function isVelocityActive() {\n    return this.data.enabled && !!this.direction;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    this.dVelocity.z = this.direction;\n    return this.dVelocity.clone();\n  },\n  bindMethods: function bindMethods() {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n  },\n  onTouchStart: function onTouchStart(e) {\n    this.direction = -1;\n\n    if (this.data.reverseEnabled && e.touches.length === 2) {\n      this.direction = 1;\n    }\n\n    e.preventDefault();\n  },\n  onTouchEnd: function onTouchEnd(e) {\n    this.direction = 0;\n    e.preventDefault();\n  }\n});","map":{"version":3,"names":["module","exports","AFRAME","registerComponent","schema","enabled","default","reverseEnabled","init","dVelocity","THREE","Vector3","bindMethods","direction","play","addEventListeners","pause","removeEventListeners","set","remove","sceneEl","el","canvasEl","canvas","addEventListener","bind","onTouchStart","onTouchEnd","removeEventListener","isVelocityActive","data","getVelocityDelta","z","clone","e","touches","length","preventDefault"],"sources":["X:/Project/back/node_modules/aframe-extras/src/controls/touch-controls.js"],"sourcesContent":["/**\n * Touch-to-move-forward controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('touch-controls', {\n  schema: {\n    enabled: { default: true },\n    reverseEnabled: { default: true }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.bindMethods();\n    this.direction = 0;\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  addEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n    const canvasEl = sceneEl.canvas;\n\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    canvasEl.addEventListener('touchstart', this.onTouchStart);\n    canvasEl.addEventListener('touchend', this.onTouchEnd);\n  },\n\n  removeEventListeners: function () {\n    const canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\n    if (!canvasEl) { return; }\n\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\n  },\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!this.direction;\n  },\n\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.direction;\n    return this.dVelocity.clone();\n  },\n\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n  },\n\n  onTouchStart: function (e) {\n    this.direction = -1;\n    if (this.data.reverseEnabled && e.touches.length === 2) {\n      this.direction = 1;\n    }\n    e.preventDefault();\n  },\n\n  onTouchEnd: function (e) {\n    this.direction = 0;\n    e.preventDefault();\n  }\n});\n"],"mappings":"AAAA;AACA;AACA;AACAA,MAAM,CAACC,OAAP,GAAiBC,MAAM,CAACC,iBAAP,CAAyB,gBAAzB,EAA2C;EAC1DC,MAAM,EAAE;IACNC,OAAO,EAAE;MAAEC,OAAO,EAAE;IAAX,CADH;IAENC,cAAc,EAAE;MAAED,OAAO,EAAE;IAAX;EAFV,CADkD;EAM1DE,IAAI,EAAE,gBAAY;IAChB,KAAKC,SAAL,GAAiB,IAAIC,KAAK,CAACC,OAAV,EAAjB;IACA,KAAKC,WAAL;IACA,KAAKC,SAAL,GAAiB,CAAjB;EACD,CAVyD;EAY1DC,IAAI,EAAE,gBAAY;IAChB,KAAKC,iBAAL;EACD,CAdyD;EAgB1DC,KAAK,EAAE,iBAAY;IACjB,KAAKC,oBAAL;IACA,KAAKR,SAAL,CAAeS,GAAf,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB;EACD,CAnByD;EAqB1DC,MAAM,EAAE,kBAAY;IAClB,KAAKH,KAAL;EACD,CAvByD;EAyB1DD,iBAAiB,EAAE,6BAAY;IAC7B,IAAMK,OAAO,GAAG,KAAKC,EAAL,CAAQD,OAAxB;IACA,IAAME,QAAQ,GAAGF,OAAO,CAACG,MAAzB;;IAEA,IAAI,CAACD,QAAL,EAAe;MACbF,OAAO,CAACI,gBAAR,CAAyB,sBAAzB,EAAiD,KAAKT,iBAAL,CAAuBU,IAAvB,CAA4B,IAA5B,CAAjD;MACA;IACD;;IAEDH,QAAQ,CAACE,gBAAT,CAA0B,YAA1B,EAAwC,KAAKE,YAA7C;IACAJ,QAAQ,CAACE,gBAAT,CAA0B,UAA1B,EAAsC,KAAKG,UAA3C;EACD,CApCyD;EAsC1DV,oBAAoB,EAAE,gCAAY;IAChC,IAAMK,QAAQ,GAAG,KAAKD,EAAL,CAAQD,OAAR,IAAmB,KAAKC,EAAL,CAAQD,OAAR,CAAgBG,MAApD;;IACA,IAAI,CAACD,QAAL,EAAe;MAAE;IAAS;;IAE1BA,QAAQ,CAACM,mBAAT,CAA6B,YAA7B,EAA2C,KAAKF,YAAhD;IACAJ,QAAQ,CAACM,mBAAT,CAA6B,UAA7B,EAAyC,KAAKD,UAA9C;EACD,CA5CyD;EA8C1DE,gBAAgB,EAAE,4BAAY;IAC5B,OAAO,KAAKC,IAAL,CAAUzB,OAAV,IAAqB,CAAC,CAAC,KAAKQ,SAAnC;EACD,CAhDyD;EAkD1DkB,gBAAgB,EAAE,4BAAY;IAC5B,KAAKtB,SAAL,CAAeuB,CAAf,GAAmB,KAAKnB,SAAxB;IACA,OAAO,KAAKJ,SAAL,CAAewB,KAAf,EAAP;EACD,CArDyD;EAuD1DrB,WAAW,EAAE,uBAAY;IACvB,KAAKc,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;IACA,KAAKE,UAAL,GAAkB,KAAKA,UAAL,CAAgBF,IAAhB,CAAqB,IAArB,CAAlB;EACD,CA1DyD;EA4D1DC,YAAY,EAAE,sBAAUQ,CAAV,EAAa;IACzB,KAAKrB,SAAL,GAAiB,CAAC,CAAlB;;IACA,IAAI,KAAKiB,IAAL,CAAUvB,cAAV,IAA4B2B,CAAC,CAACC,OAAF,CAAUC,MAAV,KAAqB,CAArD,EAAwD;MACtD,KAAKvB,SAAL,GAAiB,CAAjB;IACD;;IACDqB,CAAC,CAACG,cAAF;EACD,CAlEyD;EAoE1DV,UAAU,EAAE,oBAAUO,CAAV,EAAa;IACvB,KAAKrB,SAAL,GAAiB,CAAjB;IACAqB,CAAC,CAACG,cAAF;EACD;AAvEyD,CAA3C,CAAjB"},"metadata":{},"sourceType":"script"}
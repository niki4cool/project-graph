{"ast":null,"code":"var _require = require('three-pathfinding'),\n    Pathfinding = _require.Pathfinding;\n\nvar pathfinder = new Pathfinding();\nvar ZONE = 'level';\n/**\n * nav\n *\n * Pathfinding system, using PatrolJS.\n */\n\nmodule.exports = AFRAME.registerSystem('nav', {\n  init: function init() {\n    this.navMesh = null;\n    this.agents = new Set();\n  },\n\n  /**\n   * @param {THREE.Geometry} geometry\n   */\n  setNavMeshGeometry: function setNavMeshGeometry(geometry) {\n    this.navMesh = new THREE.Mesh(geometry);\n    pathfinder.setZoneData(ZONE, Pathfinding.createZone(geometry));\n    Array.from(this.agents).forEach(function (agent) {\n      return agent.updateNavLocation();\n    });\n  },\n\n  /**\n   * @return {THREE.Mesh}\n   */\n  getNavMesh: function getNavMesh() {\n    return this.navMesh;\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  addAgent: function addAgent(ctrl) {\n    this.agents.add(ctrl);\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  removeAgent: function removeAgent(ctrl) {\n    this.agents.delete(ctrl);\n  },\n\n  /**\n   * @param  {THREE.Vector3} start\n   * @param  {THREE.Vector3} end\n   * @param  {number} groupID\n   * @return {Array<THREE.Vector3>}\n   */\n  getPath: function getPath(start, end, groupID) {\n    return this.navMesh ? pathfinder.findPath(start, end, ZONE, groupID) : null;\n  },\n\n  /**\n   * @param {THREE.Vector3} position\n   * @return {number}\n   */\n  getGroup: function getGroup(position) {\n    return this.navMesh ? pathfinder.getGroup(ZONE, position) : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} position\n   * @param  {number} groupID\n   * @return {Node}\n   */\n  getNode: function getNode(position, groupID) {\n    return this.navMesh ? pathfinder.getClosestNode(position, ZONE, groupID, true) : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} start Starting position.\n   * @param  {THREE.Vector3} end Desired ending position.\n   * @param  {number} groupID\n   * @param  {Node} node\n   * @param  {THREE.Vector3} endTarget (Output) Adjusted step end position.\n   * @return {Node} Current node, after step is taken.\n   */\n  clampStep: function clampStep(start, end, groupID, node, endTarget) {\n    if (!this.navMesh) {\n      endTarget.copy(end);\n      return null;\n    } else if (!node) {\n      endTarget.copy(end);\n      return this.getNode(end, groupID);\n    }\n\n    return pathfinder.clampStep(start, end, node, ZONE, groupID, endTarget);\n  }\n});","map":{"version":3,"names":["require","Pathfinding","pathfinder","ZONE","module","exports","AFRAME","registerSystem","init","navMesh","agents","Set","setNavMeshGeometry","geometry","THREE","Mesh","setZoneData","createZone","Array","from","forEach","agent","updateNavLocation","getNavMesh","addAgent","ctrl","add","removeAgent","delete","getPath","start","end","groupID","findPath","getGroup","position","getNode","getClosestNode","clampStep","node","endTarget","copy"],"sources":["X:/Project/back/node_modules/aframe-extras/src/pathfinding/system.js"],"sourcesContent":["const { Pathfinding } = require('three-pathfinding');\n\nconst pathfinder = new Pathfinding();\nconst ZONE = 'level';\n\n/**\n * nav\n *\n * Pathfinding system, using PatrolJS.\n */\nmodule.exports = AFRAME.registerSystem('nav', {\n  init: function () {\n    this.navMesh = null;\n    this.agents = new Set();\n  },\n\n  /**\n   * @param {THREE.Geometry} geometry\n   */\n  setNavMeshGeometry: function (geometry) {\n    this.navMesh = new THREE.Mesh(geometry);\n    pathfinder.setZoneData(ZONE, Pathfinding.createZone(geometry));\n    Array.from(this.agents).forEach((agent) => agent.updateNavLocation());\n  },\n\n  /**\n   * @return {THREE.Mesh}\n   */\n  getNavMesh: function () {\n    return this.navMesh;\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  addAgent: function (ctrl) {\n    this.agents.add(ctrl);\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  removeAgent: function (ctrl) {\n    this.agents.delete(ctrl);\n  },\n\n  /**\n   * @param  {THREE.Vector3} start\n   * @param  {THREE.Vector3} end\n   * @param  {number} groupID\n   * @return {Array<THREE.Vector3>}\n   */\n  getPath: function (start, end, groupID) {\n    return this.navMesh\n      ? pathfinder.findPath(start, end, ZONE, groupID)\n      : null;\n  },\n\n  /**\n   * @param {THREE.Vector3} position\n   * @return {number}\n   */\n  getGroup: function (position) {\n    return this.navMesh\n      ? pathfinder.getGroup(ZONE, position)\n      : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} position\n   * @param  {number} groupID\n   * @return {Node}\n   */\n  getNode: function (position, groupID) {\n    return this.navMesh\n      ? pathfinder.getClosestNode(position, ZONE, groupID, true)\n      : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} start Starting position.\n   * @param  {THREE.Vector3} end Desired ending position.\n   * @param  {number} groupID\n   * @param  {Node} node\n   * @param  {THREE.Vector3} endTarget (Output) Adjusted step end position.\n   * @return {Node} Current node, after step is taken.\n   */\n  clampStep: function (start, end, groupID, node, endTarget) {\n    if (!this.navMesh) {\n      endTarget.copy(end);\n      return null;\n    } else if (!node) {\n      endTarget.copy(end);\n      return this.getNode(end, groupID);\n    }\n    return pathfinder.clampStep(start, end, node, ZONE, groupID, endTarget);\n  }\n});\n"],"mappings":"AAAA,eAAwBA,OAAO,CAAC,mBAAD,CAA/B;AAAA,IAAQC,WAAR,YAAQA,WAAR;;AAEA,IAAMC,UAAU,GAAG,IAAID,WAAJ,EAAnB;AACA,IAAME,IAAI,GAAG,OAAb;AAEA;AACA;AACA;AACA;AACA;;AACAC,MAAM,CAACC,OAAP,GAAiBC,MAAM,CAACC,cAAP,CAAsB,KAAtB,EAA6B;EAC5CC,IAAI,EAAE,gBAAY;IAChB,KAAKC,OAAL,GAAe,IAAf;IACA,KAAKC,MAAL,GAAc,IAAIC,GAAJ,EAAd;EACD,CAJ2C;;EAM5C;AACF;AACA;EACEC,kBAAkB,EAAE,4BAAUC,QAAV,EAAoB;IACtC,KAAKJ,OAAL,GAAe,IAAIK,KAAK,CAACC,IAAV,CAAeF,QAAf,CAAf;IACAX,UAAU,CAACc,WAAX,CAAuBb,IAAvB,EAA6BF,WAAW,CAACgB,UAAZ,CAAuBJ,QAAvB,CAA7B;IACAK,KAAK,CAACC,IAAN,CAAW,KAAKT,MAAhB,EAAwBU,OAAxB,CAAgC,UAACC,KAAD;MAAA,OAAWA,KAAK,CAACC,iBAAN,EAAX;IAAA,CAAhC;EACD,CAb2C;;EAe5C;AACF;AACA;EACEC,UAAU,EAAE,sBAAY;IACtB,OAAO,KAAKd,OAAZ;EACD,CApB2C;;EAsB5C;AACF;AACA;EACEe,QAAQ,EAAE,kBAAUC,IAAV,EAAgB;IACxB,KAAKf,MAAL,CAAYgB,GAAZ,CAAgBD,IAAhB;EACD,CA3B2C;;EA6B5C;AACF;AACA;EACEE,WAAW,EAAE,qBAAUF,IAAV,EAAgB;IAC3B,KAAKf,MAAL,CAAYkB,MAAZ,CAAmBH,IAAnB;EACD,CAlC2C;;EAoC5C;AACF;AACA;AACA;AACA;AACA;EACEI,OAAO,EAAE,iBAAUC,KAAV,EAAiBC,GAAjB,EAAsBC,OAAtB,EAA+B;IACtC,OAAO,KAAKvB,OAAL,GACHP,UAAU,CAAC+B,QAAX,CAAoBH,KAApB,EAA2BC,GAA3B,EAAgC5B,IAAhC,EAAsC6B,OAAtC,CADG,GAEH,IAFJ;EAGD,CA9C2C;;EAgD5C;AACF;AACA;AACA;EACEE,QAAQ,EAAE,kBAAUC,QAAV,EAAoB;IAC5B,OAAO,KAAK1B,OAAL,GACHP,UAAU,CAACgC,QAAX,CAAoB/B,IAApB,EAA0BgC,QAA1B,CADG,GAEH,IAFJ;EAGD,CAxD2C;;EA0D5C;AACF;AACA;AACA;AACA;EACEC,OAAO,EAAE,iBAAUD,QAAV,EAAoBH,OAApB,EAA6B;IACpC,OAAO,KAAKvB,OAAL,GACHP,UAAU,CAACmC,cAAX,CAA0BF,QAA1B,EAAoChC,IAApC,EAA0C6B,OAA1C,EAAmD,IAAnD,CADG,GAEH,IAFJ;EAGD,CAnE2C;;EAqE5C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACEM,SAAS,EAAE,mBAAUR,KAAV,EAAiBC,GAAjB,EAAsBC,OAAtB,EAA+BO,IAA/B,EAAqCC,SAArC,EAAgD;IACzD,IAAI,CAAC,KAAK/B,OAAV,EAAmB;MACjB+B,SAAS,CAACC,IAAV,CAAeV,GAAf;MACA,OAAO,IAAP;IACD,CAHD,MAGO,IAAI,CAACQ,IAAL,EAAW;MAChBC,SAAS,CAACC,IAAV,CAAeV,GAAf;MACA,OAAO,KAAKK,OAAL,CAAaL,GAAb,EAAkBC,OAAlB,CAAP;IACD;;IACD,OAAO9B,UAAU,CAACoC,SAAX,CAAqBR,KAArB,EAA4BC,GAA5B,EAAiCQ,IAAjC,EAAuCpC,IAAvC,EAA6C6B,OAA7C,EAAsDQ,SAAtD,CAAP;EACD;AAtF2C,CAA7B,CAAjB"},"metadata":{},"sourceType":"script"}
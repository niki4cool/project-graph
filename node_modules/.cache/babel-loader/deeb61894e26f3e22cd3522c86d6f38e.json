{"ast":null,"code":"var ACCEL_G = -9.8,\n    // m/s^2\nEASING = -15; // m/s^2\n\n/**\n * Jump ability.\n */\n\nmodule.exports = AFRAME.registerComponent('jump-ability', {\n  dependencies: ['velocity'],\n\n  /* Schema\n  ——————————————————————————————————————————————*/\n  schema: {\n    on: {\n      default: 'keydown:Space gamepadbuttondown:0'\n    },\n    playerHeight: {\n      default: 1.764\n    },\n    maxJumps: {\n      default: 1\n    },\n    distance: {\n      default: 5\n    },\n    debug: {\n      default: false\n    }\n  },\n  init: function init() {\n    this.velocity = 0;\n    this.numJumps = 0;\n    var beginJump = this.beginJump.bind(this),\n        events = this.data.on.split(' ');\n    this.bindings = {};\n\n    for (var i = 0; i < events.length; i++) {\n      this.bindings[events[i]] = beginJump;\n      this.el.addEventListener(events[i], beginJump);\n    }\n\n    this.bindings.collide = this.onCollide.bind(this);\n    this.el.addEventListener('collide', this.bindings.collide);\n  },\n  remove: function remove() {\n    for (var event in this.bindings) {\n      if (this.bindings.hasOwnProperty(event)) {\n        this.el.removeEventListener(event, this.bindings[event]);\n        delete this.bindings[event];\n      }\n    }\n\n    this.el.removeEventListener('collide', this.bindings.collide);\n    delete this.bindings.collide;\n  },\n  beginJump: function beginJump() {\n    if (this.numJumps < this.data.maxJumps) {\n      var data = this.data,\n          initialVelocity = Math.sqrt(-2 * data.distance * (ACCEL_G + EASING)),\n          v = this.el.getAttribute('velocity');\n      this.el.setAttribute('velocity', {\n        x: v.x,\n        y: initialVelocity,\n        z: v.z\n      });\n      this.numJumps++;\n      this.el.emit('jumpstart');\n    }\n  },\n  onCollide: function onCollide() {\n    if (this.numJumps > 0) this.el.emit('jumpend');\n    this.numJumps = 0;\n  }\n});","map":{"version":3,"names":["ACCEL_G","EASING","module","exports","AFRAME","registerComponent","dependencies","schema","on","default","playerHeight","maxJumps","distance","debug","init","velocity","numJumps","beginJump","bind","events","data","split","bindings","i","length","el","addEventListener","collide","onCollide","remove","event","hasOwnProperty","removeEventListener","initialVelocity","Math","sqrt","v","getAttribute","setAttribute","x","y","z","emit"],"sources":["X:/Project/graph/node_modules/aframe-extras/src/misc/jump-ability.js"],"sourcesContent":["const ACCEL_G = -9.8, // m/s^2\n    EASING = -15; // m/s^2\n\n/**\n * Jump ability.\n */\nmodule.exports = AFRAME.registerComponent('jump-ability', {\n  dependencies: ['velocity'],\n\n  /* Schema\n  ——————————————————————————————————————————————*/\n\n  schema: {\n    on: { default: 'keydown:Space gamepadbuttondown:0' },\n    playerHeight: { default: 1.764 },\n    maxJumps: { default: 1 },\n    distance: { default: 5 },\n    debug: { default: false }\n  },\n\n  init: function () {\n    this.velocity = 0;\n    this.numJumps = 0;\n\n    const beginJump = this.beginJump.bind(this),\n        events = this.data.on.split(' ');\n    this.bindings = {};\n    for (let i = 0; i <  events.length; i++) {\n      this.bindings[events[i]] = beginJump;\n      this.el.addEventListener(events[i], beginJump);\n    }\n    this.bindings.collide = this.onCollide.bind(this);\n    this.el.addEventListener('collide', this.bindings.collide);\n  },\n\n  remove: function () {\n    for (var event in this.bindings) {\n      if (this.bindings.hasOwnProperty(event)) {\n        this.el.removeEventListener(event, this.bindings[event]);\n        delete this.bindings[event];\n      }\n    }\n    this.el.removeEventListener('collide', this.bindings.collide);\n    delete this.bindings.collide;\n  },\n\n  beginJump: function () {\n    if (this.numJumps < this.data.maxJumps) {\n      const data = this.data,\n          initialVelocity = Math.sqrt(-2 * data.distance * (ACCEL_G + EASING)),\n          v = this.el.getAttribute('velocity');\n      this.el.setAttribute('velocity', {x: v.x, y: initialVelocity, z: v.z});\n      this.numJumps++;\n      this.el.emit('jumpstart');\n    }\n  },\n\n  onCollide: function () {\n    if (this.numJumps > 0) this.el.emit('jumpend');\n    this.numJumps = 0;\n  }\n});\n"],"mappings":"AAAA,IAAMA,OAAO,GAAG,CAAC,GAAjB;AAAA,IAAsB;AAClBC,MAAM,GAAG,CAAC,EADd,C,CACkB;;AAElB;AACA;AACA;;AACAC,MAAM,CAACC,OAAP,GAAiBC,MAAM,CAACC,iBAAP,CAAyB,cAAzB,EAAyC;EACxDC,YAAY,EAAE,CAAC,UAAD,CAD0C;;EAGxD;AACF;EAEEC,MAAM,EAAE;IACNC,EAAE,EAAE;MAAEC,OAAO,EAAE;IAAX,CADE;IAENC,YAAY,EAAE;MAAED,OAAO,EAAE;IAAX,CAFR;IAGNE,QAAQ,EAAE;MAAEF,OAAO,EAAE;IAAX,CAHJ;IAING,QAAQ,EAAE;MAAEH,OAAO,EAAE;IAAX,CAJJ;IAKNI,KAAK,EAAE;MAAEJ,OAAO,EAAE;IAAX;EALD,CANgD;EAcxDK,IAAI,EAAE,gBAAY;IAChB,KAAKC,QAAL,GAAgB,CAAhB;IACA,KAAKC,QAAL,GAAgB,CAAhB;IAEA,IAAMC,SAAS,GAAG,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAlB;IAAA,IACIC,MAAM,GAAG,KAAKC,IAAL,CAAUZ,EAAV,CAAaa,KAAb,CAAmB,GAAnB,CADb;IAEA,KAAKC,QAAL,GAAgB,EAAhB;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAIJ,MAAM,CAACK,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;MACvC,KAAKD,QAAL,CAAcH,MAAM,CAACI,CAAD,CAApB,IAA2BN,SAA3B;MACA,KAAKQ,EAAL,CAAQC,gBAAR,CAAyBP,MAAM,CAACI,CAAD,CAA/B,EAAoCN,SAApC;IACD;;IACD,KAAKK,QAAL,CAAcK,OAAd,GAAwB,KAAKC,SAAL,CAAeV,IAAf,CAAoB,IAApB,CAAxB;IACA,KAAKO,EAAL,CAAQC,gBAAR,CAAyB,SAAzB,EAAoC,KAAKJ,QAAL,CAAcK,OAAlD;EACD,CA3BuD;EA6BxDE,MAAM,EAAE,kBAAY;IAClB,KAAK,IAAIC,KAAT,IAAkB,KAAKR,QAAvB,EAAiC;MAC/B,IAAI,KAAKA,QAAL,CAAcS,cAAd,CAA6BD,KAA7B,CAAJ,EAAyC;QACvC,KAAKL,EAAL,CAAQO,mBAAR,CAA4BF,KAA5B,EAAmC,KAAKR,QAAL,CAAcQ,KAAd,CAAnC;QACA,OAAO,KAAKR,QAAL,CAAcQ,KAAd,CAAP;MACD;IACF;;IACD,KAAKL,EAAL,CAAQO,mBAAR,CAA4B,SAA5B,EAAuC,KAAKV,QAAL,CAAcK,OAArD;IACA,OAAO,KAAKL,QAAL,CAAcK,OAArB;EACD,CAtCuD;EAwCxDV,SAAS,EAAE,qBAAY;IACrB,IAAI,KAAKD,QAAL,GAAgB,KAAKI,IAAL,CAAUT,QAA9B,EAAwC;MACtC,IAAMS,IAAI,GAAG,KAAKA,IAAlB;MAAA,IACIa,eAAe,GAAGC,IAAI,CAACC,IAAL,CAAU,CAAC,CAAD,GAAKf,IAAI,CAACR,QAAV,IAAsBZ,OAAO,GAAGC,MAAhC,CAAV,CADtB;MAAA,IAEImC,CAAC,GAAG,KAAKX,EAAL,CAAQY,YAAR,CAAqB,UAArB,CAFR;MAGA,KAAKZ,EAAL,CAAQa,YAAR,CAAqB,UAArB,EAAiC;QAACC,CAAC,EAAEH,CAAC,CAACG,CAAN;QAASC,CAAC,EAAEP,eAAZ;QAA6BQ,CAAC,EAAEL,CAAC,CAACK;MAAlC,CAAjC;MACA,KAAKzB,QAAL;MACA,KAAKS,EAAL,CAAQiB,IAAR,CAAa,WAAb;IACD;EACF,CAjDuD;EAmDxDd,SAAS,EAAE,qBAAY;IACrB,IAAI,KAAKZ,QAAL,GAAgB,CAApB,EAAuB,KAAKS,EAAL,CAAQiB,IAAR,CAAa,SAAb;IACvB,KAAK1B,QAAL,GAAgB,CAAhB;EACD;AAtDuD,CAAzC,CAAjB"},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"var fetchScript = require('../../lib/fetch-script')();\n\nvar LOADER_SRC = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js';\n\nvar loadLoader = function () {\n  var promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}();\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from jsdelivr.\n */\n\n\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {\n    type: 'model'\n  },\n  init: function init() {\n    var _this = this;\n\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(function () {\n      _this.loader = new THREE.GLTFLoader();\n\n      _this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n  update: function update() {\n    var _this2 = this;\n\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n\n    if (!src) {\n      return;\n    }\n\n    this.remove();\n    this.loaderPromise.then(function () {\n      _this2.loader.load(src, function gltfLoaded(gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {\n          format: 'gltf',\n          model: self.model\n        });\n      });\n    });\n  },\n  remove: function remove() {\n    if (!this.model) {\n      return;\n    }\n\n    this.el.removeObject3D('mesh');\n  }\n});","map":{"version":3,"names":["fetchScript","require","LOADER_SRC","loadLoader","promise","module","exports","AFRAME","registerComponent","schema","type","init","model","loader","loaderPromise","then","THREE","GLTFLoader","setCrossOrigin","update","self","el","src","data","remove","load","gltfLoaded","gltfModel","scene","animations","setObject3D","emit","format","removeObject3D"],"sources":["X:/Project/back/node_modules/aframe-extras/src/loaders/gltf-model-legacy.js"],"sourcesContent":["const fetchScript = require('../../lib/fetch-script')();\n\nconst LOADER_SRC = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js';\n\nconst loadLoader = (function () {\n  let promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}());\n\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from jsdelivr.\n */\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {type: 'model'},\n\n  init: function () {\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(() => {\n      this.loader = new THREE.GLTFLoader();\n      this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n\n  update: function () {\n    const self = this;\n    const el = this.el;\n    const src = this.data;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.loaderPromise.then(() => {\n      this.loader.load(src, function gltfLoaded (gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {format: 'gltf', model: self.model});\n      });\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n"],"mappings":"AAAA,IAAMA,WAAW,GAAGC,OAAO,CAAC,wBAAD,CAAP,EAApB;;AAEA,IAAMC,UAAU,GAAG,mFAAnB;;AAEA,IAAMC,UAAU,GAAI,YAAY;EAC9B,IAAIC,OAAJ;EACA,OAAO,YAAY;IACjBA,OAAO,GAAGA,OAAO,IAAIJ,WAAW,CAACE,UAAD,CAAhC;IACA,OAAOE,OAAP;EACD,CAHD;AAID,CANmB,EAApB;AAQA;AACA;AACA;AACA;;;AACAC,MAAM,CAACC,OAAP,GAAiBC,MAAM,CAACC,iBAAP,CAAyB,mBAAzB,EAA8C;EAC7DC,MAAM,EAAE;IAACC,IAAI,EAAE;EAAP,CADqD;EAG7DC,IAAI,EAAE,gBAAY;IAAA;;IAChB,KAAKC,KAAL,GAAa,IAAb;IACA,KAAKC,MAAL,GAAc,IAAd;IACA,KAAKC,aAAL,GAAqBX,UAAU,GAAGY,IAAb,CAAkB,YAAM;MAC3C,KAAI,CAACF,MAAL,GAAc,IAAIG,KAAK,CAACC,UAAV,EAAd;;MACA,KAAI,CAACJ,MAAL,CAAYK,cAAZ,CAA2B,WAA3B;IACD,CAHoB,CAArB;EAID,CAV4D;EAY7DC,MAAM,EAAE,kBAAY;IAAA;;IAClB,IAAMC,IAAI,GAAG,IAAb;IACA,IAAMC,EAAE,GAAG,KAAKA,EAAhB;IACA,IAAMC,GAAG,GAAG,KAAKC,IAAjB;;IAEA,IAAI,CAACD,GAAL,EAAU;MAAE;IAAS;;IAErB,KAAKE,MAAL;IAEA,KAAKV,aAAL,CAAmBC,IAAnB,CAAwB,YAAM;MAC5B,MAAI,CAACF,MAAL,CAAYY,IAAZ,CAAiBH,GAAjB,EAAsB,SAASI,UAAT,CAAqBC,SAArB,EAAgC;QACpDP,IAAI,CAACR,KAAL,GAAae,SAAS,CAACC,KAAvB;QACAR,IAAI,CAACR,KAAL,CAAWiB,UAAX,GAAwBF,SAAS,CAACE,UAAlC;QACAR,EAAE,CAACS,WAAH,CAAe,MAAf,EAAuBV,IAAI,CAACR,KAA5B;QACAS,EAAE,CAACU,IAAH,CAAQ,cAAR,EAAwB;UAACC,MAAM,EAAE,MAAT;UAAiBpB,KAAK,EAAEQ,IAAI,CAACR;QAA7B,CAAxB;MACD,CALD;IAMD,CAPD;EAQD,CA7B4D;EA+B7DY,MAAM,EAAE,kBAAY;IAClB,IAAI,CAAC,KAAKZ,KAAV,EAAiB;MAAE;IAAS;;IAC5B,KAAKS,EAAL,CAAQY,cAAR,CAAuB,MAAvB;EACD;AAlC4D,CAA9C,CAAjB"},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"var vg = require('../../lib/hex-grid.min.js');\n\nvar defaultHexGrid = require('../../lib/default-hex-grid');\n/**\n * Hex grid.\n */\n\n\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-hexgrid', {\n  defaultComponents: {\n    'hexgrid': {}\n  },\n  mappings: {\n    src: 'hexgrid.src'\n  }\n});\nmodule.exports.Component = AFRAME.registerComponent('hexgrid', {\n  dependencies: ['material'],\n  schema: {\n    src: {\n      type: 'asset'\n    }\n  },\n  init: function init() {\n    var _this = this;\n\n    var data = this.data;\n\n    if (data.src) {\n      fetch(data.src).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        return _this.addMesh(json);\n      });\n    } else {\n      this.addMesh(defaultHexGrid);\n    }\n  },\n  addMesh: function addMesh(json) {\n    var grid = new vg.HexGrid();\n    grid.fromJSON(json);\n    var board = new vg.Board(grid);\n    board.generateTilemap();\n    this.el.setObject3D('mesh', board.group);\n    this.addMaterial();\n  },\n  addMaterial: function addMaterial() {\n    var materialComponent = this.el.components.material;\n    var material = (materialComponent || {}).material;\n    if (!material) return;\n    this.el.object3D.traverse(function (node) {\n      if (node.isMesh) {\n        node.material = material;\n      }\n    });\n  },\n  remove: function remove() {\n    this.el.removeObject3D('mesh');\n  }\n});","map":{"version":3,"names":["vg","require","defaultHexGrid","module","exports","Primitive","AFRAME","registerPrimitive","defaultComponents","mappings","src","Component","registerComponent","dependencies","schema","type","init","data","fetch","then","response","json","addMesh","grid","HexGrid","fromJSON","board","Board","generateTilemap","el","setObject3D","group","addMaterial","materialComponent","components","material","object3D","traverse","node","isMesh","remove","removeObject3D"],"sources":["X:/Project/back/node_modules/aframe-extras/src/primitives/a-hexgrid.js"],"sourcesContent":["const vg = require('../../lib/hex-grid.min.js');\nconst defaultHexGrid = require('../../lib/default-hex-grid');\n\n/**\n * Hex grid.\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-hexgrid', {\n  defaultComponents: {\n    'hexgrid': {}\n  },\n  mappings: {\n    src: 'hexgrid.src'\n  }\n});\n\nmodule.exports.Component = AFRAME.registerComponent('hexgrid', {\n  dependencies: ['material'],\n  schema: {\n    src: {type: 'asset'}\n  },\n  init: function () {\n    const data = this.data;\n    if (data.src) {\n      fetch(data.src)\n        .then((response) => response.json())\n        .then((json) => this.addMesh(json));\n    } else {\n      this.addMesh(defaultHexGrid);\n    }\n  },\n  addMesh: function (json) {\n    const grid = new vg.HexGrid();\n    grid.fromJSON(json);\n    const board = new vg.Board(grid);\n    board.generateTilemap();\n    this.el.setObject3D('mesh', board.group);\n    this.addMaterial();\n  },\n  addMaterial: function () {\n    const materialComponent = this.el.components.material;\n    const material = (materialComponent || {}).material;\n    if (!material) return;\n    this.el.object3D.traverse((node) => {\n      if (node.isMesh) {\n        node.material = material;\n      }\n    });\n  },\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  }\n});\n"],"mappings":"AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,2BAAD,CAAlB;;AACA,IAAMC,cAAc,GAAGD,OAAO,CAAC,4BAAD,CAA9B;AAEA;AACA;AACA;;;AACAE,MAAM,CAACC,OAAP,CAAeC,SAAf,GAA2BC,MAAM,CAACC,iBAAP,CAAyB,WAAzB,EAAsC;EAC/DC,iBAAiB,EAAE;IACjB,WAAW;EADM,CAD4C;EAI/DC,QAAQ,EAAE;IACRC,GAAG,EAAE;EADG;AAJqD,CAAtC,CAA3B;AASAP,MAAM,CAACC,OAAP,CAAeO,SAAf,GAA2BL,MAAM,CAACM,iBAAP,CAAyB,SAAzB,EAAoC;EAC7DC,YAAY,EAAE,CAAC,UAAD,CAD+C;EAE7DC,MAAM,EAAE;IACNJ,GAAG,EAAE;MAACK,IAAI,EAAE;IAAP;EADC,CAFqD;EAK7DC,IAAI,EAAE,gBAAY;IAAA;;IAChB,IAAMC,IAAI,GAAG,KAAKA,IAAlB;;IACA,IAAIA,IAAI,CAACP,GAAT,EAAc;MACZQ,KAAK,CAACD,IAAI,CAACP,GAAN,CAAL,CACGS,IADH,CACQ,UAACC,QAAD;QAAA,OAAcA,QAAQ,CAACC,IAAT,EAAd;MAAA,CADR,EAEGF,IAFH,CAEQ,UAACE,IAAD;QAAA,OAAU,KAAI,CAACC,OAAL,CAAaD,IAAb,CAAV;MAAA,CAFR;IAGD,CAJD,MAIO;MACL,KAAKC,OAAL,CAAapB,cAAb;IACD;EACF,CAd4D;EAe7DoB,OAAO,EAAE,iBAAUD,IAAV,EAAgB;IACvB,IAAME,IAAI,GAAG,IAAIvB,EAAE,CAACwB,OAAP,EAAb;IACAD,IAAI,CAACE,QAAL,CAAcJ,IAAd;IACA,IAAMK,KAAK,GAAG,IAAI1B,EAAE,CAAC2B,KAAP,CAAaJ,IAAb,CAAd;IACAG,KAAK,CAACE,eAAN;IACA,KAAKC,EAAL,CAAQC,WAAR,CAAoB,MAApB,EAA4BJ,KAAK,CAACK,KAAlC;IACA,KAAKC,WAAL;EACD,CAtB4D;EAuB7DA,WAAW,EAAE,uBAAY;IACvB,IAAMC,iBAAiB,GAAG,KAAKJ,EAAL,CAAQK,UAAR,CAAmBC,QAA7C;IACA,IAAMA,QAAQ,GAAG,CAACF,iBAAiB,IAAI,EAAtB,EAA0BE,QAA3C;IACA,IAAI,CAACA,QAAL,EAAe;IACf,KAAKN,EAAL,CAAQO,QAAR,CAAiBC,QAAjB,CAA0B,UAACC,IAAD,EAAU;MAClC,IAAIA,IAAI,CAACC,MAAT,EAAiB;QACfD,IAAI,CAACH,QAAL,GAAgBA,QAAhB;MACD;IACF,CAJD;EAKD,CAhC4D;EAiC7DK,MAAM,EAAE,kBAAY;IAClB,KAAKX,EAAL,CAAQY,cAAR,CAAuB,MAAvB;EACD;AAnC4D,CAApC,CAA3B"},"metadata":{},"sourceType":"script"}
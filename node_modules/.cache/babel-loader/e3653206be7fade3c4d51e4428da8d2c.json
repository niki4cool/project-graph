{"ast":null,"code":"THREE.ColladaLoader = require('../../lib/ColladaLoader');\n/**\n * collada-model-legacy\n *\n * Loader for COLLADA (.dae) format.\n */\n\nmodule.exports.Component = AFRAME.registerComponent('collada-model-legacy', {\n  schema: {\n    type: 'asset'\n  },\n  init: function init() {\n    this.model = null;\n    this.loader = new THREE.ColladaLoader();\n  },\n  update: function update() {\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n    var rendererSystem = this.el.sceneEl.systems.renderer;\n\n    if (!src) {\n      return;\n    }\n\n    this.remove();\n    this.loader.load(src, function (colladaModel) {\n      self.model = colladaModel.scene;\n      self.model.traverse(function (object) {\n        if (object.isMesh) {\n          var material = object.material;\n          if (material.color) rendererSystem.applyColorCorrection(material.color);\n          if (material.map) rendererSystem.applyColorCorrection(material.map);\n          if (material.emissive) rendererSystem.applyColorCorrection(material.emissive);\n          if (material.emissiveMap) rendererSystem.applyColorCorrection(material.emissiveMap);\n        }\n      });\n      el.setObject3D('mesh', self.model);\n      el.emit('model-loaded', {\n        format: 'collada',\n        model: self.model\n      });\n    });\n  },\n  remove: function remove() {\n    if (!this.model) {\n      return;\n    }\n\n    this.el.removeObject3D('mesh');\n  }\n});","map":{"version":3,"names":["THREE","ColladaLoader","require","module","exports","Component","AFRAME","registerComponent","schema","type","init","model","loader","update","self","el","src","data","rendererSystem","sceneEl","systems","renderer","remove","load","colladaModel","scene","traverse","object","isMesh","material","color","applyColorCorrection","map","emissive","emissiveMap","setObject3D","emit","format","removeObject3D"],"sources":["X:/Project/graph/node_modules/aframe-extras/src/loaders/collada-model-legacy.js"],"sourcesContent":["THREE.ColladaLoader = require('../../lib/ColladaLoader');\n\n/**\n * collada-model-legacy\n *\n * Loader for COLLADA (.dae) format.\n */\nmodule.exports.Component = AFRAME.registerComponent('collada-model-legacy', {\n  schema: {type: 'asset'},\n\n  init: function () {\n    this.model = null;\n    this.loader = new THREE.ColladaLoader();\n  },\n\n  update: function () {\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n    var rendererSystem = this.el.sceneEl.systems.renderer;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.loader.load(src, function (colladaModel) {\n      self.model = colladaModel.scene;\n      self.model.traverse(function (object) {\n        if (object.isMesh) {\n          var material = object.material;\n          if (material.color) rendererSystem.applyColorCorrection(material.color);\n          if (material.map) rendererSystem.applyColorCorrection(material.map);\n          if (material.emissive) rendererSystem.applyColorCorrection(material.emissive);\n          if (material.emissiveMap) rendererSystem.applyColorCorrection(material.emissiveMap);\n        }\n      });\n      el.setObject3D('mesh', self.model);\n      el.emit('model-loaded', {format: 'collada', model: self.model});\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n"],"mappings":"AAAAA,KAAK,CAACC,aAAN,GAAsBC,OAAO,CAAC,yBAAD,CAA7B;AAEA;AACA;AACA;AACA;AACA;;AACAC,MAAM,CAACC,OAAP,CAAeC,SAAf,GAA2BC,MAAM,CAACC,iBAAP,CAAyB,sBAAzB,EAAiD;EAC1EC,MAAM,EAAE;IAACC,IAAI,EAAE;EAAP,CADkE;EAG1EC,IAAI,EAAE,gBAAY;IAChB,KAAKC,KAAL,GAAa,IAAb;IACA,KAAKC,MAAL,GAAc,IAAIZ,KAAK,CAACC,aAAV,EAAd;EACD,CANyE;EAQ1EY,MAAM,EAAE,kBAAY;IAClB,IAAIC,IAAI,GAAG,IAAX;IACA,IAAIC,EAAE,GAAG,KAAKA,EAAd;IACA,IAAIC,GAAG,GAAG,KAAKC,IAAf;IACA,IAAIC,cAAc,GAAG,KAAKH,EAAL,CAAQI,OAAR,CAAgBC,OAAhB,CAAwBC,QAA7C;;IAEA,IAAI,CAACL,GAAL,EAAU;MAAE;IAAS;;IAErB,KAAKM,MAAL;IAEA,KAAKV,MAAL,CAAYW,IAAZ,CAAiBP,GAAjB,EAAsB,UAAUQ,YAAV,EAAwB;MAC5CV,IAAI,CAACH,KAAL,GAAaa,YAAY,CAACC,KAA1B;MACAX,IAAI,CAACH,KAAL,CAAWe,QAAX,CAAoB,UAAUC,MAAV,EAAkB;QACpC,IAAIA,MAAM,CAACC,MAAX,EAAmB;UACjB,IAAIC,QAAQ,GAAGF,MAAM,CAACE,QAAtB;UACA,IAAIA,QAAQ,CAACC,KAAb,EAAoBZ,cAAc,CAACa,oBAAf,CAAoCF,QAAQ,CAACC,KAA7C;UACpB,IAAID,QAAQ,CAACG,GAAb,EAAkBd,cAAc,CAACa,oBAAf,CAAoCF,QAAQ,CAACG,GAA7C;UAClB,IAAIH,QAAQ,CAACI,QAAb,EAAuBf,cAAc,CAACa,oBAAf,CAAoCF,QAAQ,CAACI,QAA7C;UACvB,IAAIJ,QAAQ,CAACK,WAAb,EAA0BhB,cAAc,CAACa,oBAAf,CAAoCF,QAAQ,CAACK,WAA7C;QAC3B;MACF,CARD;MASAnB,EAAE,CAACoB,WAAH,CAAe,MAAf,EAAuBrB,IAAI,CAACH,KAA5B;MACAI,EAAE,CAACqB,IAAH,CAAQ,cAAR,EAAwB;QAACC,MAAM,EAAE,SAAT;QAAoB1B,KAAK,EAAEG,IAAI,CAACH;MAAhC,CAAxB;IACD,CAbD;EAcD,CAhCyE;EAkC1EW,MAAM,EAAE,kBAAY;IAClB,IAAI,CAAC,KAAKX,KAAV,EAAiB;MAAE;IAAS;;IAC5B,KAAKI,EAAL,CAAQuB,cAAR,CAAuB,MAAvB;EACD;AArCyE,CAAjD,CAA3B"},"metadata":{},"sourceType":"script"}
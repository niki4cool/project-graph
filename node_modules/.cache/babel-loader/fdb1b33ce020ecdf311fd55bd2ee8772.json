{"ast":null,"code":"/**\n * object-model\n *\n * Loader for THREE.js JSON format. Somewhat confusingly, there are two different THREE.js formats,\n * both having the .json extension. This loader supports only THREE.ObjectLoader, which typically\n * includes multiple meshes or an entire scene.\n *\n * Check the console for errors, if in doubt. You may need to use `json-model` or\n * `blend-character-model` for some .js and .json files.\n *\n * See: https://clara.io/learn/user-guide/data_exchange/threejs_export\n */\nmodule.exports = AFRAME.registerComponent('object-model', {\n  schema: {\n    src: {\n      type: 'asset'\n    },\n    crossorigin: {\n      default: ''\n    }\n  },\n  init: function init() {\n    this.model = null;\n  },\n  update: function update() {\n    var _this = this;\n\n    var loader;\n    var data = this.data;\n    if (!data.src) return;\n    this.remove();\n    loader = new THREE.ObjectLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, function (object) {\n      // Enable skinning, if applicable.\n      object.traverse(function (o) {\n        if (o instanceof THREE.SkinnedMesh && o.material) {\n          o.material.skinning = !!(o.geometry && o.geometry.bones || []).length;\n        }\n      });\n\n      _this.load(object);\n    });\n  },\n  load: function load(model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {\n      format: 'json',\n      model: model\n    });\n  },\n  remove: function remove() {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});","map":{"version":3,"names":["module","exports","AFRAME","registerComponent","schema","src","type","crossorigin","default","init","model","update","loader","data","remove","THREE","ObjectLoader","setCrossOrigin","load","object","traverse","o","SkinnedMesh","material","skinning","geometry","bones","length","el","setObject3D","emit","format","removeObject3D"],"sources":["X:/Project/back/node_modules/aframe-extras/src/loaders/object-model.js"],"sourcesContent":["/**\n * object-model\n *\n * Loader for THREE.js JSON format. Somewhat confusingly, there are two different THREE.js formats,\n * both having the .json extension. This loader supports only THREE.ObjectLoader, which typically\n * includes multiple meshes or an entire scene.\n *\n * Check the console for errors, if in doubt. You may need to use `json-model` or\n * `blend-character-model` for some .js and .json files.\n *\n * See: https://clara.io/learn/user-guide/data_exchange/threejs_export\n */\nmodule.exports = AFRAME.registerComponent('object-model', {\n  schema: {\n    src:         { type: 'asset' },\n    crossorigin: { default: '' }\n  },\n\n  init: function () {\n    this.model = null;\n  },\n\n  update: function () {\n    let loader;\n    const data = this.data;\n    if (!data.src) return;\n\n    this.remove();\n    loader = new THREE.ObjectLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, (object) => {\n\n      // Enable skinning, if applicable.\n      object.traverse((o) => {\n        if (o instanceof THREE.SkinnedMesh && o.material) {\n          o.material.skinning = !!((o.geometry && o.geometry.bones) || []).length;\n        }\n      });\n\n      this.load(object);\n    });\n  },\n\n  load: function (model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {format: 'json', model: model});\n  },\n\n  remove: function () {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,MAAM,CAACC,OAAP,GAAiBC,MAAM,CAACC,iBAAP,CAAyB,cAAzB,EAAyC;EACxDC,MAAM,EAAE;IACNC,GAAG,EAAU;MAAEC,IAAI,EAAE;IAAR,CADP;IAENC,WAAW,EAAE;MAAEC,OAAO,EAAE;IAAX;EAFP,CADgD;EAMxDC,IAAI,EAAE,gBAAY;IAChB,KAAKC,KAAL,GAAa,IAAb;EACD,CARuD;EAUxDC,MAAM,EAAE,kBAAY;IAAA;;IAClB,IAAIC,MAAJ;IACA,IAAMC,IAAI,GAAG,KAAKA,IAAlB;IACA,IAAI,CAACA,IAAI,CAACR,GAAV,EAAe;IAEf,KAAKS,MAAL;IACAF,MAAM,GAAG,IAAIG,KAAK,CAACC,YAAV,EAAT;IACA,IAAIH,IAAI,CAACN,WAAT,EAAsBK,MAAM,CAACK,cAAP,CAAsBJ,IAAI,CAACN,WAA3B;IACtBK,MAAM,CAACM,IAAP,CAAYL,IAAI,CAACR,GAAjB,EAAsB,UAACc,MAAD,EAAY;MAEhC;MACAA,MAAM,CAACC,QAAP,CAAgB,UAACC,CAAD,EAAO;QACrB,IAAIA,CAAC,YAAYN,KAAK,CAACO,WAAnB,IAAkCD,CAAC,CAACE,QAAxC,EAAkD;UAChDF,CAAC,CAACE,QAAF,CAAWC,QAAX,GAAsB,CAAC,CAAC,CAAEH,CAAC,CAACI,QAAF,IAAcJ,CAAC,CAACI,QAAF,CAAWC,KAA1B,IAAoC,EAArC,EAAyCC,MAAjE;QACD;MACF,CAJD;;MAMA,KAAI,CAACT,IAAL,CAAUC,MAAV;IACD,CAVD;EAWD,CA7BuD;EA+BxDD,IAAI,EAAE,cAAUR,KAAV,EAAiB;IACrB,KAAKA,KAAL,GAAaA,KAAb;IACA,KAAKkB,EAAL,CAAQC,WAAR,CAAoB,MAApB,EAA4BnB,KAA5B;IACA,KAAKkB,EAAL,CAAQE,IAAR,CAAa,cAAb,EAA6B;MAACC,MAAM,EAAE,MAAT;MAAiBrB,KAAK,EAAEA;IAAxB,CAA7B;EACD,CAnCuD;EAqCxDI,MAAM,EAAE,kBAAY;IAClB,IAAI,KAAKJ,KAAT,EAAgB,KAAKkB,EAAL,CAAQI,cAAR,CAAuB,MAAvB;EACjB;AAvCuD,CAAzC,CAAjB"},"metadata":{},"sourceType":"script"}